/* ===================================================
 * bootstrap-markdown.js v2.3.1
 * http://github.com/toopay/bootstrap-markdown
 * ===================================================
 * Copyright 2013 Taufan Aditya
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(t){"use strict";var e=function(e,n){this.$ns="bootstrap-markdown",this.$element=t(e),this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null},this.$options=t.extend(!0,{},t.fn.markdown.defaults,n),this.$oldContent=null,this.$isPreview=!1,this.$editor=null,this.$textarea=null,this.$handler=[],this.$callback=[],this.$nextTab=[],this.showEditor()};e.prototype={constructor:e,__alterButtons:function(e,n){var i=this.$handler,o="all"==e,r=this;t.each(i,function(t,i){var a=!0;a=o?!1:i.indexOf(e)<0,0==a&&n(r.$editor.find('button[data-handler="'+i+'"]'))})},__buildButtons:function(e,n){var i,o=this.$ns,r=this.$handler,a=this.$callback;for(i=0;i<e.length;i++){var s,d=e[i];for(s=0;s<d.length;s++){var l,u=d[s].data,h=t("<div/>",{"class":"btn-group"});for(l=0;l<u.length;l++){var c=u[l],p="",f=o+"-"+c.name,g=c.icon instanceof Object?c.icon[this.$options.iconlibrary]:c.icon,m=c.btnText?c.btnText:"",N=c.btnClass?c.btnClass:"btn",b=c.tabIndex?c.tabIndex:"-1";1==c.toggle&&(p=' data-toggle="button"'),h.append('<button type="button" class="'+N+' btn-default btn-sm" title="'+c.title+'" tabindex="'+b+'" data-provider="'+o+'" data-handler="'+f+'"'+p+'><span class="'+g+'"></span> '+m+"</button>"),r.push(f),a.push(c.callback)}n.append(h)}}return n},__setListener:function(){var e="undefined"!=typeof this.$textarea.attr("rows"),n=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",i=e?this.$textarea.attr("rows"):n;this.$textarea.attr("rows",i),this.$options.resize&&this.$textarea.css("resize",this.$options.resize),this.$textarea.on("focus",t.proxy(this.focus,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$textarea.on("keydown",t.proxy(this.keydown,this)),this.$textarea.data("markdown",this)},__handle:function(e){var n=t(e.currentTarget),i=this.$handler,o=this.$callback,r=n.attr("data-handler"),a=i.indexOf(r),s=o[a];t(e.currentTarget).focus(),s(this),r.indexOf("cmdSave")<0&&this.$textarea.focus(),e.preventDefault()},showEditor:function(){var e,n=this,i=this.$ns,o=this.$element,r=(o.css("height"),o.css("width"),this.$editable),a=this.$handler,s=this.$callback,d=this.$options,l=t("<div/>",{"class":"md-editor",click:function(){n.focus()}});if(null==this.$editor){var u=t("<div/>",{"class":"md-header btn-toolbar"}),h=[];if(d.buttons.length>0&&(h=h.concat(d.buttons[0])),d.additionalButtons.length>0&&(h=h.concat(d.additionalButtons[0])),d.reorderButtonGroups.length>0&&(h=h.filter(function(t){return d.reorderButtonGroups.indexOf(t.name)>-1}).sort(function(t,e){return d.reorderButtonGroups.indexOf(t.name)<d.reorderButtonGroups.indexOf(e.name)?-1:d.reorderButtonGroups.indexOf(t.name)>d.reorderButtonGroups.indexOf(e.name)?1:0})),h.length>0&&(u=this.__buildButtons([h],u)),l.append(u),o.is("textarea"))o.before(l),e=o,e.addClass("md-input"),l.append(e);else{var c="function"==typeof toMarkdown?toMarkdown(o.html()):o.html(),p=t.trim(c);e=t("<textarea/>",{"class":"md-input",val:p}),l.append(e),r.el=o,r.type=o.prop("tagName").toLowerCase(),r.content=o.html(),t(o[0].attributes).each(function(){r.attrKeys.push(this.nodeName),r.attrValues.push(this.nodeValue)}),o.replaceWith(l)}if(d.savable){var f=t("<div/>",{"class":"md-footer"}),g="cmdSave";a.push(g),s.push(d.onSave),f.append('<button class="btn btn-success" data-provider="'+i+'" data-handler="'+g+'"><i class="icon icon-white icon-ok"></i> Save</button>'),l.append(f)}if(d.width&&"inherit"!==d.width&&(jQuery.isNumeric(d.width)?(l.css("display","table"),e.css("width",d.width+"px")):l.addClass(d.width)),d.height&&"inherit"!==d.height)if(jQuery.isNumeric(d.height)){var m=d.height;u&&(m=Math.max(0,m-u.outerHeight())),f&&(m=Math.max(0,m-f.outerHeight())),e.css("height",m+"px")}else l.addClass(d.height);this.$editor=l,this.$textarea=e,this.$editable=r,this.$oldContent=this.getContent(),this.__setListener(),this.$editor.attr("id",(new Date).getTime()),this.$editor.on("click",'[data-provider="bootstrap-markdown"]',t.proxy(this.__handle,this))}else this.$editor.show();return d.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),d.onShow(this),this},showPreview:function(){var e,n=this.$options,i=n.onPreview(this),o=this.$textarea,r=o.next(),a=t("<div/>",{"class":"md-preview","data-provider":"markdown-preview"});if(this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview"),"string"==typeof i)e=i;else{var s=o.val();e="object"==typeof markdown?markdown.toHTML(s):"function"==typeof marked?marked(s):s}return a.html(e),r&&"md-footer"==r.attr("class")?a.insertBefore(r):o.parent().append(a),a.css({width:o.outerWidth()+"px",height:o.outerHeight()+"px"}),o.hide(),a.data("markdown",this),this},hidePreview:function(){this.$isPreview=!1;var t=this.$editor.find('div[data-provider="markdown-preview"]');return t.remove(),this.enableButtons("all"),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(t){return this.$textarea.val(t),this},findSelection:function(t){var e,n=this.getContent();if(e=n.indexOf(t),e>=0&&t.length>0){var i,o=this.getSelection();return this.setSelection(e,e+t.length),i=this.getSelection(),this.setSelection(o.start,o.end),i}return null},getSelection:function(){var t=this.$textarea[0];return("selectionStart"in t&&function(){var e=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:e,text:t.value.substr(t.selectionStart,e)}}||function(){return null})()},setSelection:function(t,e){var n=this.$textarea[0];return("selectionStart"in n&&function(){n.selectionStart=t,n.selectionEnd=e}||function(){return null})()},replaceSelection:function(t){var e=this.$textarea[0];return("selectionStart"in e&&function(){return e.value=e.value.substr(0,e.selectionStart)+t+e.value.substr(e.selectionEnd,e.value.length),e.selectionStart=e.value.length,this}||function(){return e.value+=t,jQuery(e)})()},getNextTab:function(){if(0==this.$nextTab.length)return null;var t,e=this.$nextTab.shift();return"function"==typeof e?t=e():"object"==typeof e&&e.length>0&&(t=e),t},setNextTab:function(t,e){if("string"==typeof t){var n=this;this.$nextTab.push(function(){return n.findSelection(t)})}else if("numeric"==typeof t&&"numeric"==typeof e){var i=this.getSelection();this.setSelection(t,e),this.$nextTab.push(this.getSelection()),this.setSelection(i.start,i.end)}},enableButtons:function(t){var e=function(t){t.removeAttr("disabled")};return this.__alterButtons(t,e),this},disableButtons:function(t){var e=function(t){t.attr("disabled","disabled")};return this.__alterButtons(t,e),this},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.keyup(e)},keypress:function(t){this.suppressKeyPressRepeat||this.keyup(t)},keyup:function(t){var e=!1;switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var n;if(n=this.getNextTab(),null!=n){var i=this;setTimeout(function(){i.setSelection(n.start,n.end)},500),e=!0}else{var o=this.getSelection();o.start==o.end&&o.end==this.getContent().length?e=!1:(this.setSelection(this.getContent().length,this.getContent().length),e=!0)}break;case 13:case 27:e=!1;break;default:e=!1}e&&(t.stopPropagation(),t.preventDefault())},focus:function(){var e=this.$options,n=(e.hideable,this.$editor);return n.addClass("active"),t(document).find(".md-editor").each(function(){if(t(this).attr("id")!=n.attr("id")){var e;e=t(this).find("textarea").data("markdown"),null==e&&(e=t(this).find('div[data-provider="markdown-preview"]').data("markdown")),e&&e.blur()}}),e.onFocus(this),this},blur:function(){var e=this.$options,n=e.hideable,i=this.$editor,o=this.$editable;if(i.hasClass("active")||0==this.$element.parent().length){if(i.removeClass("active"),n)if(null!=o.el){var r=t("<"+o.type+"/>"),a=this.getContent(),s="object"==typeof markdown?markdown.toHTML(a):a;t(o.attrKeys).each(function(t){r.attr(o.attrKeys[t],o.attrValues[t])}),r.html(s),i.replaceWith(r)}else i.hide();e.onBlur(this)}return this}};var n=t.fn.markdown;t.fn.markdown=function(n){return this.each(function(){var i=t(this),o=i.data("markdown"),r="object"==typeof n&&n;o||i.data("markdown",o=new e(this,r))})},t.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",buttons:[[{name:"groupFont",data:[{name:"cmdBold",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold"},callback:function(t){var e,n,i=t.getSelection(),o=t.getContent();e=0==i.length?"strong text":i.text,"**"==o.substr(i.start-2,2)&&"**"==o.substr(i.end,2)?(t.setSelection(i.start-2,i.end+2),t.replaceSelection(e),n=i.start-2):(t.replaceSelection("**"+e+"**"),n=i.start+2),t.setSelection(n,n+e.length)}},{name:"cmdItalic",title:"Italic",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic"},callback:function(t){var e,n,i=t.getSelection(),o=t.getContent();e=0==i.length?"emphasized text":i.text,"*"==o.substr(i.start-1,1)&&"*"==o.substr(i.end,1)?(t.setSelection(i.start-1,i.end+1),t.replaceSelection(e),n=i.start-1):(t.replaceSelection("*"+e+"*"),n=i.start+1),t.setSelection(n,n+e.length)}},{name:"cmdHeading",title:"Heading",icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-font"},callback:function(t){var e,n,i,o,r=t.getSelection(),a=t.getContent();e=0==r.length?"heading text":r.text+"\n",i=4,"### "==a.substr(r.start-i,i)||(i=3,"###"==a.substr(r.start-i,i))?(t.setSelection(r.start-i,r.end),t.replaceSelection(e),n=r.start-i):r.start>0&&(o=a.substr(r.start-1,1),!!o&&"\n"!=o)?(t.replaceSelection("\n\n### "+e),n=r.start+6):(t.replaceSelection("### "+e),n=r.start+4),t.setSelection(n,n+e.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",icon:{glyph:"glyphicon glyphicon-globe",fa:"fa fa-globe"},callback:function(t){{var e,n,i,o=t.getSelection();t.getContent()}e=0==o.length?"enter link description here":o.text,i=prompt("Insert Hyperlink","http://"),null!=i&&""!=i&&"http://"!=i&&(t.replaceSelection("["+e+"]("+i+")"),n=o.start+1,t.setSelection(n,n+e.length))}},{name:"cmdImage",title:"Image",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o"},callback:function(t){{var e,n,i,o=t.getSelection();t.getContent()}e=0==o.length?"enter image description here":o.text,i=prompt("Insert Image Hyperlink","http://"),null!=i&&(t.replaceSelection("!["+e+"]("+i+' "enter image title here")'),n=o.start+2,t.setNextTab("enter image title here"),t.setSelection(n,n+e.length))}}]},{name:"groupMisc",data:[{name:"cmdList",title:"List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list"},callback:function(e){{var n,i,o=e.getSelection();e.getContent()}if(0==o.length)n="list text here",e.replaceSelection("- "+n),i=o.start+2;else if(o.text.indexOf("\n")<0)n=o.text,e.replaceSelection("- "+n),i=o.start+2;else{var r=[];r=o.text.split("\n"),n=r[0],t.each(r,function(t,e){r[t]="- "+e}),e.replaceSelection("\n\n"+r.join("\n")),i=o.start+4}e.setSelection(i,i+n.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search"},callback:function(t){var e=t.$isPreview;0==e?t.showPreview():t.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],onShow:function(){},onPreview:function(){},onSave:function(){},onBlur:function(){},onFocus:function(){}},t.fn.markdown.Constructor=e,t.fn.markdown.noConflict=function(){return t.fn.markdown=n,this};var i=function(t){var e=t;return e.data("markdown")?void e.data("markdown").showEditor():void e.markdown(e.data())},o=function(e){var n,i=!1,o=t(e.currentTarget);"focusin"!=e.type&&"click"!=e.type||1!=o.length||"object"!=typeof o[0]||(n=o[0].activeElement,t(n).data("markdown")||("undefined"==typeof t(n).parent().parent().parent().attr("class")||t(n).parent().parent().parent().attr("class").indexOf("md-editor")<0?("undefined"==typeof t(n).parent().parent().attr("class")||t(n).parent().parent().attr("class").indexOf("md-editor")<0)&&(i=!0):i=!1),i&&t(document).find(".md-editor").each(function(){var e=t(n).parent();if(t(this).attr("id")!=e.attr("id")){var i;i=t(this).find("textarea").data("markdown"),null==i&&(i=t(this).find('div[data-provider="markdown-preview"]').data("markdown")),i&&i.blur()}}),e.stopPropagation())};t(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(e){i(t(this)),e.preventDefault()}).on("click",function(t){o(t)}).on("focusin",function(t){o(t)}).ready(function(){t('textarea[data-provide="markdown"]').each(function(){i(t(this))})})}(window.jQuery),function(t,e){function n(t){return t&&t.toLowerCase?t.toLowerCase():t}function i(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]==e)return!o;return o}var o=!1,r=null,a=parseFloat,s=Math.min,d=/(-?\d+\.?\d*)$/g,l=/(\d+\.?\d*)$/g,u=[],h=[],c=function(t){return"string"==typeof t},p=Array.prototype.indexOf||function(t){var e=this.length,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=e);e>n;n++)if(n in this&&this[n]===t)return n;return-1};t.tinysort={id:"TinySort",version:"1.5.2",copyright:"Copyright (c) 2008-2013 Ron Valstar",uri:"http://tinysort.sjeiti.com/",licensed:{MIT:"http://www.opensource.org/licenses/mit-license.php",GPL:"http://www.gnu.org/licenses/gpl.html"},plugin:function(){var t=function(t,e){u.push(t),h.push(e)};return t.indexOf=p,t}(),defaults:{order:"asc",attr:r,data:r,useVal:o,place:"start",returns:o,cases:o,forceStrings:o,ignoreDashes:o,sortFunction:r}},t.fn.extend({tinysort:function(){var f,g,m,N=this,b=[],y=[],A=[],v=[],$=0,_=[],T=[],w=function(e){t.each(u,function(t,n){n.call(n,e)})},C=function(e,i){var r=0;for(0!==$&&($=0);0===r&&m>$;){var s=v[$],u=s.oSettings,p=u.ignoreDashes?l:d;if(w(u),u.sortFunction)r=u.sortFunction(e,i);else if("rand"==u.order)r=Math.random()<.5?1:-1;else{var f=o,g=u.cases?e.s[$]:n(e.s[$]),N=u.cases?i.s[$]:n(i.s[$]);if(g=g.replace(/^\s*/i,"").replace(/\s*$/i,""),N=N.replace(/^\s*/i,"").replace(/\s*$/i,""),!P.forceStrings){var b=c(g)?g&&g.match(p):o,y=c(N)?N&&N.match(p):o;if(b&&y){var A=g.substr(0,g.length-b[0].length),_=N.substr(0,N.length-y[0].length);A==_&&(f=!o,g=a(b[0]),N=a(y[0]))}}r=s.iAsc*(N>g?-1:g>N?1:0)}t.each(h,function(t,e){r=e.call(e,f,g,N,r)}),0===r&&$++}return r};for(f=0,g=arguments.length;g>f;f++){var x=arguments[f];c(x)?_.push(x)-1>T.length&&(T.length=_.length-1):T.push(x)>_.length&&(_.length=T.length)}for(_.length>T.length&&(T.length=_.length),m=_.length,0===m&&(m=_.length=1,T.push({})),f=0,g=m;g>f;f++){var D=_[f],P=t.extend({},t.tinysort.defaults,T[f]),S=!(!D||""==D),k=S&&":"==D[0];v.push({sFind:D,oSettings:P,bFind:S,bAttr:!(P.attr===r||""==P.attr),bData:P.data!==r,bFilter:k,$Filter:k?N.filter(D):N,fnSort:P.sortFunction,iAsc:"asc"==P.order?1:-1})}return N.each(function(n,i){var o,r=t(i),a=r.parent().get(0),s=[];for(j=0;m>j;j++){var d=v[j],l=d.bFind?d.bFilter?d.$Filter.filter(i):r.find(d.sFind):r;s.push(d.bData?l.data(d.oSettings.data):d.bAttr?l.attr(d.oSettings.attr):d.oSettings.useVal?l.val():l.text()),o===e&&(o=l)}var u=p.call(A,a);0>u&&(u=A.push(a)-1,y[u]={s:[],n:[]}),o.length>0?y[u].s.push({s:s,e:r,n:n}):y[u].n.push({e:r,n:n})}),t.each(y,function(t,e){e.s.sort(C)}),t.each(y,function(e,n){var r=n.s.length,a=[],d=r,l=[0,0];switch(P.place){case"first":t.each(n.s,function(t,e){d=s(d,e.n)});break;case"org":t.each(n.s,function(t,e){a.push(e.n)});break;case"end":d=n.n.length;break;default:d=0}for(f=0;r>f;f++){var u=i(a,f)?!o:f>=d&&f<d+n.s.length,h=(u?n.s:n.n)[l[u?0:1]].e;h.parent().append(h),(u||!P.returns)&&b.push(h.get(0)),l[u?0:1]++}}),N.length=0,Array.prototype.push.apply(N,b),N}}),t.fn.TinySort=t.fn.Tinysort=t.fn.tsort=t.fn.tinysort}(jQuery),function(t){function e(o,a){var s=o.attr("data-sortcolumn"),d=o.attr("colspan");if(d){for(var l,u=parseFloat(s);u<parseFloat(s)+parseFloat(d);u++)l=l+', [data-sortcolumn="'+u+'"]';var h=t(l).not("[colspan]"),c=h.filter("[data-mainsort]").eq(0);return s=c.length?c:h.eq(0),void e(s,a)}var p=o.attr("data-defaultsign")||i;if(t.browser.mozilla){var f=a.find("div.mozilla");null!=f&&f.parent().html(f.text()),o.wrapInner('<div class="mozilla"></div>'),o.children().eq(0).append('<span class="sign '+p+'"></span>')}else a.find("span.sign").remove(),o.append('<span class="sign '+p+'"></span>');var g=o.attr("data-sortkey");n=g,r[g]="asc"==r[g]?"desc":"asc","desc"==r[g]&&o.find("span.sign").addClass("up");var m=a.find("tbody tr");m.tsort("td:eq("+s+")",{order:r[g],attr:"data-value"})}var n,i,o=t(document),r=[];if(t.bootstrapSortable=function(o,a){var s="undefined"!=typeof moment;i=a?a:"arrow",t("table.sortable").each(function(){var i=t(this);o=o===!0,i.find("span.sign").remove(),i.find("thead tr").each(function(e){var n=0;t(this).find("th").each(function(i){var o=t(this);o.attr("data-sortcolumn",i+n),o.attr("data-sortkey",i+"-"+e),void 0!==o.attr("colspan")&&(n+=parseInt(o.attr("colspan"))-1)})}),i.find("td").each(function(){var e=t(this);void 0!=e.attr("data-dateformat")&&s?e.attr("data-value",moment(e.text(),e.attr("data-dateformat")).format("YYYY/MM/DD/HH/mm/ss")):void 0===e.attr("data-value")&&e.attr("data-value",e.text())}),i.find('thead th[data-defaultsort!="disabled"]').each(function(){var i=t(this),a=i.closest("table.sortable");i.data("sortTable",a);var s=i.attr("data-sortkey"),d=o?n:-1;r[s]=o?r[s]:i.attr("data-defaultsort"),null!=r[s]&&o==(s==d)&&(r[s]="asc"==r[s]?"desc":"asc",e(i,a))}),i.trigger("sorted")})},o.on("click",'table.sortable thead th[data-defaultsort!="disabled"]',function(){var n=t(this),i=n.data("sortTable")||n.closest("table.sortable");e(n,i),i.trigger("sorted")}),!t.browser){t.browser={chrome:!1,mozilla:!1,opera:!1,msie:!1,safari:!1};var a=navigator.userAgent;t.each(t.browser,function(e){t.browser[e]=new RegExp(e,"i").test(a)?!0:!1,t.browser.mozilla&&"mozilla"==e&&(t.browser.mozilla=new RegExp("firefox","i").test(a)?!0:!1),t.browser.chrome&&"safari"==e&&(t.browser.safari=!1)})}t(t.bootstrapSortable)}(jQuery),function(t){t.fn.characterCounter=function(e){function n(t){var e="";for(var n in t)e+=" "+n+'="'+t[n]+'"';return e}function i(){var t=e.counterCssClass;return e.customFields.class&&(t+=" "+e.customFields.class,delete e.customFields["class"]),"<"+e.counterWrapper+n(e.customFields)+' class="'+t+'"></'+e.counterWrapper+">"}function o(t){return e.counterFormat.replace(/%1/,t)}function r(n){var i=t(n).val().length,r=e.limit-i,a=e.counterSelector?t(e.counterSelector):t(n).next("."+e.counterCssClass);0>r?(a.addClass(e.counterExceededCssClass),e.exceeded=!0,e.onExceed(i)):e.exceeded&&(a.removeClass(e.counterExceededCssClass),e.onDeceed(i),e.exceeded=!1),a.html(o(r))}function a(e){t(e).bind("keyup",function(){r(e)}).bind("paste",function(){var t=this;setTimeout(function(){r(t)},0)})}var s={exceeded:!1,counterSelector:!1,limit:150,counterWrapper:"span",counterCssClass:"counter",counterFormat:"%1",counterExceededCssClass:"exceeded",onExceed:function(){},onDeceed:function(){},customFields:{}},e=t.extend(s,e);return this.each(function(){e.counterSelector||t(this).after(i()),a(this),r(this)})}}(jQuery),// Copyright (c) 2009-2010 Dominic Baggott
// Copyright (c) 2009-2010 Ash Berlin
// Copyright (c) 2011 Christoph Dorn <christoph@christophdorn.com> (http://www.christophdorn.com)
function(t){function e(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function n(){var t=require("util");return"Markdown.mk_block( "+t.inspect(this.toString())+", "+t.inspect(this.trailing)+", "+t.inspect(this.lineNumber)+" )"}function i(t){for(var e=0,n=-1;-1!==(n=t.indexOf("\n",n+1));)e++;return e}function o(t,e){function n(t){this.len_after=t,this.name="close_"+e}var i=t+"_state",o="strong"==t?"em_state":"strong_state";return function(r){if(this[i][0]==e)return this[i].shift(),[r.length,new n(r.length-e.length)];var a=this[o].slice(),s=this[i].slice();this[i].unshift(e);{var d=this.processInline(r.substr(e.length)),l=d[d.length-1];this[i].shift()}if(l instanceof n){d.pop();var u=r.length-l.len_after;return[u,[t].concat(d)]}return this[o]=a,this[i]=s,[e.length,e]}}function r(t){for(var e=t.split(""),n=[""],i=!1;e.length;){var o=e.shift();switch(o){case" ":i?n[n.length-1]+=o:n.push("");break;case"'":case'"':i=!i;break;case"\\":o=e.shift();default:n[n.length-1]+=o}}return n}function s(t){return m(t)&&t.length>1&&"object"==typeof t[1]&&!m(t[1])?t[1]:void 0}function d(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function l(t){if("string"==typeof t)return d(t);var e=t.shift(),n={},i=[];for(!t.length||"object"!=typeof t[0]||t[0]instanceof Array||(n=t.shift());t.length;)i.push(arguments.callee(t.shift()));var o="";for(var r in n)o+=" "+r+'="'+d(n[r])+'"';return"img"==e||"br"==e||"hr"==e?"<"+e+o+"/>":"<"+e+o+">"+i.join("")+"</"+e+">"}function u(t,e,n){var i;n=n||{};var o=t.slice(0);"function"==typeof n.preprocessTreeNode&&(o=n.preprocessTreeNode(o,e));var r=s(o);if(r){o[1]={};for(i in r)o[1][i]=r[i];r=o[1]}if("string"==typeof o)return o;switch(o[0]){case"header":o[0]="h"+o[1].level,delete o[1].level;break;case"bulletlist":o[0]="ul";break;case"numberlist":o[0]="ol";break;case"listitem":o[0]="li";break;case"para":o[0]="p";break;case"markdown":o[0]="html",r&&delete r.references;break;case"code_block":o[0]="pre",i=r?2:1;var a=["code"];a.push.apply(a,o.splice(i)),o[i]=a;break;case"inlinecode":o[0]="code";break;case"img":o[1].src=o[1].href,delete o[1].href;break;case"linebreak":o[0]="br";break;case"link":o[0]="a";break;case"link_ref":o[0]="a";var d=e[r.ref];if(!d)return r.original;delete r.ref,r.href=d.href,d.title&&(r.title=d.title),delete r.original;break;case"img_ref":o[0]="img";var d=e[r.ref];if(!d)return r.original;delete r.ref,r.src=d.href,d.title&&(r.title=d.title),delete r.original}if(i=1,r){for(var l in o[1])i=2;1===i&&o.splice(i,1)}for(;i<o.length;++i)o[i]=arguments.callee(o[i],e,n);return o}function h(t){for(var e=s(t)?2:1;e<t.length;)"string"==typeof t[e]?e+1<t.length&&"string"==typeof t[e+1]?t[e]+=t.splice(e+1,1)[0]:++e:(arguments.callee(t[e]),++e)}var c=t.Markdown=function N(t){switch(typeof t){case"undefined":this.dialect=N.dialects.Gruber;break;case"object":this.dialect=t;break;default:if(!(t in N.dialects))throw new Error("Unknown Markdown dialect '"+String(t)+"'");this.dialect=N.dialects[t]}this.em_state=[],this.strong_state=[],this.debug_indent=""};t.parse=function(t,e){var n=new c(e);return n.toTree(t)},t.toHTML=function(e,n,i){var o=t.toHTMLTree(e,n,i);return t.renderJsonML(o)},t.toHTMLTree=function(t,e,n){"string"==typeof t&&(t=this.parse(t,e));var i=s(t),o={};i&&i.references&&(o=i.references);var r=u(t,o,n);return h(r),r};var f=c.mk_block=function(t,i,o){1==arguments.length&&(i="\n\n");var r=new String(t);return r.trailing=i,r.inspect=n,r.toSource=e,void 0!=o&&(r.lineNumber=o),r};c.prototype.split_blocks=function(t){var e,n=/([\s\S]+?)($|\n(?:\s*\n|$)+)/g,o=[],r=1;for(null!=(e=/^(\s*\n)/.exec(t))&&(r+=i(e[0]),n.lastIndex=e[0].length);null!==(e=n.exec(t));)o.push(f(e[1],e[2],r)),r+=i(e[0]);return o},c.prototype.processBlock=function(t,e){var n=this.dialect.block,i=n.__order__;if("__call__"in n)return n.__call__.call(this,t,e);for(var o=0;o<i.length;o++){var r=n[i[o]].call(this,t,e);if(r)return(!m(r)||r.length>0&&!m(r[0]))&&this.debug(i[o],"didn't return a proper array"),r}return[]},c.prototype.processInline=function(t){return this.dialect.inline.__call__.call(this,String(t))},c.prototype.toTree=function(t,e){var n=t instanceof Array?t:this.split_blocks(t),i=this.tree;try{for(this.tree=e||this.tree||["markdown"];n.length;){var o=this.processBlock(n.shift(),n);o.length&&this.tree.push.apply(this.tree,o)}return this.tree}finally{e&&(this.tree=i)}},c.prototype.debug=function(){var t=Array.prototype.slice.call(arguments);t.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,t),"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log.apply(null,t)},c.prototype.loop_re_over_block=function(t,e,n){for(var i,o=e.valueOf();o.length&&null!=(i=t.exec(o));)o=o.substr(i[0].length),n.call(this,i);return o},c.dialects={},c.dialects.Gruber={block:{atxHeader:function(t,e){var n=t.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!n)return void 0;var i=["header",{level:n[1].length}];return Array.prototype.push.apply(i,this.processInline(n[2])),n[0].length<t.length&&e.unshift(f(t.substr(n[0].length),t.trailing,t.lineNumber+2)),[i]},setextHeader:function(t,e){var n=t.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!n)return void 0;var i="="===n[2]?1:2,o=["header",{level:i},n[1]];return n[0].length<t.length&&e.unshift(f(t.substr(n[0].length),t.trailing,t.lineNumber+2)),[o]},code:function(t,e){var n=[],i=/^(?: {0,3}\t| {4})(.*)\n?/;if(!t.match(i))return void 0;t:for(;;){var o=this.loop_re_over_block(i,t.valueOf(),function(t){n.push(t[1])});if(o.length){e.unshift(f(o,t.trailing));break t}if(!e.length)break t;if(!e[0].match(i))break t;n.push(t.trailing.replace(/[^\n]/g,"").substring(2)),t=e.shift()}return[["code_block",n.join("\n")]]},horizRule:function(t,e){var n=t.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!n)return void 0;var i=[["hr"]];return n[1]&&i.unshift.apply(i,this.processBlock(n[1],[])),n[3]&&e.unshift(f(n[3])),i},lists:function(){function t(t){return new RegExp("(?:^("+d+"{0,"+t+"} {0,3})("+r+")\\s+)|(^"+d+"{0,"+(t-1)+"}[ ]{0,4})")}function e(t){return t.replace(/ {0,3}\t/g,"    ")}function n(t,e,n,i){if(e)return void t.push(["para"].concat(n));var o=t[t.length-1]instanceof Array&&"para"==t[t.length-1][0]?t[t.length-1]:t;i&&t.length>1&&n.unshift(i);for(var r=0;r<n.length;r++){var a=n[r],s="string"==typeof a;s&&o.length>1&&"string"==typeof o[o.length-1]?o[o.length-1]+=a:o.push(a)}}function i(t,e){for(var n=new RegExp("^("+d+"{"+t+"}.*?\\n?)*$"),i=new RegExp("^"+d+"{"+t+"}","gm"),o=[];e.length>0;){if(n.exec(e[0])){var r=e.shift(),a=r.replace(i,"");o.push(f(a,r.trailing,r.lineNumber))}break}return o}function o(t,e,n){var i=t.list,o=i[i.length-1];if(!(o[1]instanceof Array&&"para"==o[1][0]))if(e+1==n.length)o.push(["para"].concat(o.splice(1)));else{var r=o.pop();o.push(["para"].concat(o.splice(1)),r)}}var r="[*+-]|\\d+\\.",a=/[*+-]/,s=new RegExp("^( {0,3})("+r+")[ 	]+"),d="(?: {0,3}\\t| {4})";return function(r,d){function l(t){var e=a.exec(t[2])?["bulletlist"]:["numberlist"];return p.push({list:e,indent:t[1]}),e}var u=r.match(s);if(!u)return void 0;for(var h,c,p=[],f=l(u),m=!1,N=[p[0].list];;){for(var b=r.split(/(?=\n)/),y="",A=0;A<b.length;A++){var v="",$=b[A].replace(/^\n/,function(t){return v=t,""}),_=t(p.length);if(u=$.match(_),void 0!==u[1]){y.length&&(n(h,m,this.processInline(y),v),m=!1,y=""),u[1]=e(u[1]);var T=Math.floor(u[1].length/4)+1;if(T>p.length)f=l(u),h.push(f),h=f[1]=["listitem"];else{var w=!1;for(c=0;c<p.length;c++)if(p[c].indent==u[1]){f=p[c].list,p.splice(c+1),w=!0;break}w||(T++,T<=p.length?(p.splice(T),f=p[T-1].list):(f=l(u),h.push(f))),h=["listitem"],f.push(h)}v=""}$.length>u[0].length&&(y+=v+$.substr(u[0].length))}y.length&&(n(h,m,this.processInline(y),v),m=!1,y="");var C=i(p.length,d);C.length>0&&(g(p,o,this),h.push.apply(h,this.toTree(C,[])));var x=d[0]&&d[0].valueOf()||"";if(!x.match(s)&&!x.match(/^ /))break;r=d.shift();var D=this.dialect.block.horizRule(r,d);if(D){N.push.apply(N,D);break}g(p,o,this),m=!0}return N}}(),blockquote:function(t,e){if(!t.match(/^>/m))return void 0;var n=[];if(">"!=t[0]){for(var i=t.split(/\n/),o=[];i.length&&">"!=i[0][0];)o.push(i.shift());t=i.join("\n"),n.push.apply(n,this.processBlock(o.join("\n"),[]))}for(;e.length&&">"==e[0][0];){var r=e.shift();t=new String(t+t.trailing+r),t.trailing=r.trailing}{var a=t.replace(/^> ?/gm,"");this.tree}return n.push(this.toTree(a,["blockquote"])),n},referenceDefn:function(t,e){var n=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!t.match(n))return void 0;s(this.tree)||this.tree.splice(1,0,{});var i=s(this.tree);void 0===i.references&&(i.references={});var o=this.loop_re_over_block(n,t,function(t){t[2]&&"<"==t[2][0]&&">"==t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1));var e=i.references[t[1].toLowerCase()]={href:t[2]};void 0!==t[4]?e.title=t[4]:void 0!==t[5]&&(e.title=t[5])});return o.length&&e.unshift(f(o,t.trailing)),[]},para:function(t){return[["para"].concat(this.processInline(t))]}}},c.dialects.Gruber.inline={__oneElement__:function(t,e,n){var i,o;e=e||this.dialect.inline.__patterns__;var r=new RegExp("([\\s\\S]*?)("+(e.source||e)+")");if(i=r.exec(t),!i)return[t.length,t];if(i[1])return[i[1].length,i[1]];var o;return i[2]in this.dialect.inline&&(o=this.dialect.inline[i[2]].call(this,t.substr(i.index),i,n||[])),o=o||[i[2].length,i[2]]},__call__:function(t,e){function n(t){"string"==typeof t&&"string"==typeof o[o.length-1]?o[o.length-1]+=t:o.push(t)}for(var i,o=[];t.length>0;)i=this.dialect.inline.__oneElement__.call(this,t,e,o),t=t.substr(i.shift()),g(i,n);return o},"]":function(){},"}":function(){},"\\":function(t){return t.match(/^\\[\\`\*_{}\[\]()#\+.!\-]/)?[2,t[1]]:[1,"\\"]},"![":function(t){var e=t.match(/^!\[(.*?)\][ \t]*\([ \t]*(\S*)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1)),e[2]=this.dialect.inline.__call__.call(this,e[2],/\\/)[0];var n={alt:e[1],href:e[2]||""};return void 0!==e[4]&&(n.title=e[4]),[e[0].length,["img",n]]}return e=t.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),e?[e[0].length,["img_ref",{alt:e[1],ref:e[2].toLowerCase(),original:e[0]}]]:[2,"!["]},"[":function b(t){var e=String(t),n=c.DialectHelpers.inline_until_char.call(this,t.substr(1),"]");if(!n)return[1,"["];var b,i,o=1+n[0],r=n[1];t=t.substr(o);var a=t.match(/^\s*\([ \t]*(\S+)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(a){var s=a[1];if(o+=a[0].length,s&&"<"==s[0]&&">"==s[s.length-1]&&(s=s.substring(1,s.length-1)),!a[3])for(var d=1,l=0;l<s.length;l++)switch(s[l]){case"(":d++;break;case")":0==--d&&(o-=s.length-l,s=s.substring(0,l))}return s=this.dialect.inline.__call__.call(this,s,/\\/)[0],i={href:s||""},void 0!==a[3]&&(i.title=a[3]),b=["link",i].concat(r),[o,b]}return a=t.match(/^\s*\[(.*?)\]/),a?(o+=a[0].length,i={ref:(a[1]||String(r)).toLowerCase(),original:e.substr(0,o)},b=["link_ref",i].concat(r),[o,b]):1==r.length&&"string"==typeof r[0]?(i={ref:r[0].toLowerCase(),original:e.substr(0,o)},b=["link_ref",i,r[0]],[o,b]):[1,"["]},"<":function(t){var e;return null!=(e=t.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?e[3]?[e[0].length,["link",{href:"mailto:"+e[3]},e[3]]]:"mailto"==e[2]?[e[0].length,["link",{href:e[1]},e[1].substr("mailto:".length)]]:[e[0].length,["link",{href:e[1]},e[1]]]:[1,"<"]},"`":function(t){var e=t.match(/(`+)(([\s\S]*?)\1)/);return e&&e[2]?[e[1].length+e[2].length,["inlinecode",e[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}},c.dialects.Gruber.inline["**"]=o("strong","**"),c.dialects.Gruber.inline.__=o("strong","__"),c.dialects.Gruber.inline["*"]=o("em","*"),c.dialects.Gruber.inline._=o("em","_"),c.buildBlockOrder=function(t){var e=[];for(var n in t)"__order__"!=n&&"__call__"!=n&&e.push(n);t.__order__=e},c.buildInlinePatterns=function(t){var e=[];for(var n in t)if(!n.match(/^__.*__$/)){var i=n.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");e.push(1==n.length?i:"(?:"+i+")")}e=e.join("|"),t.__patterns__=e;var o=t.__call__;t.__call__=function(t,n){return void 0!=n?o.call(this,t,n):o.call(this,t,e)}},c.DialectHelpers={},c.DialectHelpers.inline_until_char=function(t,e){for(var n=0,i=[];;){if(t[n]==e)return n++,[n,i];if(n>=t.length)return null;var o=this.dialect.inline.__oneElement__.call(this,t.substr(n));n+=o[0],i.push.apply(i,o.slice(1))}},c.subclassDialect=function(t){function e(){}function n(){}return e.prototype=t.block,n.prototype=t.inline,{block:new e,inline:new n}},c.buildBlockOrder(c.dialects.Gruber.block),c.buildInlinePatterns(c.dialects.Gruber.inline),c.dialects.Maruku=c.subclassDialect(c.dialects.Gruber),c.dialects.Maruku.processMetaHash=function(t){for(var e=r(t),n={},i=0;i<e.length;++i)if(/^#/.test(e[i]))n.id=e[i].substring(1);else if(/^\./.test(e[i]))n["class"]=n["class"]?n["class"]+e[i].replace(/./," "):e[i].substring(1);else if(/\=/.test(e[i])){var o=e[i].split(/\=/);n[o[0]]=o[1]}return n},c.dialects.Maruku.block.document_meta=function(t){if(t.lineNumber>1)return void 0;if(!t.match(/^(?:\w+:.*\n)*\w+:.*$/))return void 0;s(this.tree)||this.tree.splice(1,0,{});var e=t.split(/\n/);for(p in e){var n=e[p].match(/(\w+):\s*(.*)$/),i=n[1].toLowerCase(),o=n[2];this.tree[1][i]=o}return[]},c.dialects.Maruku.block.block_meta=function(t){var e=t.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!e)return void 0;var n,i=this.dialect.processMetaHash(e[2]);if(""===e[1]){var o=this.tree[this.tree.length-1];if(n=s(o),"string"==typeof o)return void 0;n||(n={},o.splice(1,0,n));for(a in i)n[a]=i[a];return[]}var r=t.replace(/\n.*$/,""),d=this.processBlock(r,[]);n=s(d[0]),n||(n={},d[0].splice(1,0,n));for(a in i)n[a]=i[a];return d},c.dialects.Maruku.block.definition_list=function(t,e){var n,i=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,o=["dl"];if(!(s=t.match(i)))return void 0;for(var r=[t];e.length&&i.exec(e[0]);)r.push(e.shift());for(var a=0;a<r.length;++a){var s=r[a].match(i),d=s[1].replace(/\n$/,"").split(/\n/),l=s[2].split(/\n:\s+/);for(n=0;n<d.length;++n)o.push(["dt",d[n]]);for(n=0;n<l.length;++n)o.push(["dd"].concat(this.processInline(l[n].replace(/(\n)\s+/,"$1"))))}return[o]},c.dialects.Maruku.inline["{:"]=function(t,e,n){if(!n.length)return[2,"{:"];var i=n[n.length-1];if("string"==typeof i)return[2,"{:"];var o=t.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!o)return[2,"{:"];var r=this.dialect.processMetaHash(o[1]),a=s(i);a||(a={},i.splice(1,0,a));for(var d in r)a[d]=r[d];return[o[0].length,""]},c.buildBlockOrder(c.dialects.Maruku.block),c.buildInlinePatterns(c.dialects.Maruku.inline);var g,m=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)};g=Array.prototype.forEach?function(t,e,n){return t.forEach(e,n)}:function(t,e,n){for(var i=0;i<t.length;i++)e.call(n||t,t[i],i,t)},t.renderJsonML=function(t,e){e=e||{},e.root=e.root||!1;var n=[];if(e.root)n.push(l(t));else for(t.shift(),!t.length||"object"!=typeof t[0]||t[0]instanceof Array||t.shift();t.length;)n.push(l(t.shift()));return n.join("\n\n")}}(function(){return"undefined"==typeof exports?(window.markdown={},window.markdown):exports}());/*
 * to-markdown - an HTML to Markdown converter
 *
 * Copyright 2011, Dom Christie
 * Licenced under the MIT licence
 *
 */
var toMarkdown=function(t){function e(t,e){var n="void"===e.type?"<"+e.tag+"\\b([^>]*)\\/?>":"<"+e.tag+"\\b([^>]*)>([\\s\\S]*?)<\\/"+e.tag+">",i=new RegExp(n,"gi"),o="";return o="string"==typeof e.replacement?t.replace(i,e.replacement):t.replace(i,function(t,n,i,o){return e.replacement.call(this,t,n,i,o)})}function n(t){return new RegExp(t+"\\s*=\\s*[\"']?([^\"']*)[\"']?","i")}function i(t){return t=t.replace(/<(ul|ol)\b[^>]*>([\s\S]*?)<\/\1>/gi,function(t,e,n){var i=n.split("</li>");for(i.splice(i.length-1,1),s=0,d=i.length;d>s;s++)if(i[s]){var o="ol"===e?s+1+".  ":"*   ";i[s]=i[s].replace(/\s*<li[^>]*>([\s\S]*)/i,function(t,e){return e=e.replace(/^\s+/,""),e=e.replace(/\n\n/g,"\n\n    "),e=e.replace(/\n([ ]*)+(\*|\d+\.) /g,"\n$1    $2 "),o+e})}return i.join("\n")}),"\n\n"+t.replace(/[ \t]+\n|\s+$/g,"")}function o(t){return t=t.replace(/<blockquote\b[^>]*>([\s\S]*?)<\/blockquote>/gi,function(t,e){return e=e.replace(/^\s+|\s+$/g,""),e=r(e),e=e.replace(/^/gm,"> "),e=e.replace(/^(>([ \t]{2,}>)+)/gm,"> >")})}function r(t){return t=t.replace(/^[\t\r\n]+|[\t\r\n]+$/g,""),t=t.replace(/\n\s+\n/g,"\n\n"),t=t.replace(/\n{3,}/g,"\n\n")}for(var a=[{patterns:"p",replacement:function(t,e,n){return n?"\n\n"+n+"\n":""}},{patterns:"br",type:"void",replacement:"\n"},{patterns:"h([1-6])",replacement:function(t,e,n,i){for(var o="",r=0;e>r;r++)o+="#";return"\n\n"+o+" "+i+"\n"}},{patterns:"hr",type:"void",replacement:"\n\n* * *\n"},{patterns:"a",replacement:function(t,e,i){var o=e.match(n("href")),r=e.match(n("title"));return o?"["+i+"]("+o[1]+(r&&r[1]?' "'+r[1]+'"':"")+")":t}},{patterns:["b","strong"],replacement:function(t,e,n){return n?"**"+n+"**":""}},{patterns:["i","em"],replacement:function(t,e,n){return n?"_"+n+"_":""}},{patterns:"code",replacement:function(t,e,n){return n?"`"+n+"`":""}},{patterns:"img",type:"void",replacement:function(t,e){var i=e.match(n("src")),o=e.match(n("alt")),r=e.match(n("title"));return"!["+(o&&o[1]?o[1]:"")+"]("+i[1]+(r&&r[1]?' "'+r[1]+'"':"")+")"}}],s=0,d=a.length;d>s;s++)if("string"==typeof a[s].patterns)t=e(t,{tag:a[s].patterns,replacement:a[s].replacement,type:a[s].type});else for(var l=0,u=a[s].patterns.length;u>l;l++)t=e(t,{tag:a[s].patterns[l],replacement:a[s].replacement,type:a[s].type});t=t.replace(/<pre\b[^>]*>`([\s\S]*)`<\/pre>/gi,function(t,e){return e=e.replace(/^\t+/g,"  "),e=e.replace(/\n/g,"\n    "),"\n\n    "+e+"\n"}),t=t.replace(/^(\s{0,3}\d+)\. /g,"$1\\. ");for(var h=/<(ul|ol)\b[^>]*>(?:(?!<ul|<ol)[\s\S])*?<\/\1>/gi;t.match(h);)t=t.replace(h,function(t){return i(t)});for(var c=/<blockquote\b[^>]*>((?:(?!<blockquote)[\s\S])*?)<\/blockquote>/gi;t.match(c);)t=t.replace(c,function(t){return o(t)});return r(t)};"object"==typeof exports&&(exports.toMarkdown=toMarkdown);