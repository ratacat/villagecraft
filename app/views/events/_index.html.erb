<table class="table">
  <thead>
    <tr>
      <th>Activity</th>
      <% if user_signed_in? %>
        <th>Proximity</th>
      <% end %>
      <th>Time</th>
      <th>Day</th>
      <th>Rating</th>
      <th>Spots</th>
      <th>Where</th>
      <th>Price</th>
      <th>Host</th>
      <% if user_signed_in? %>
        <th></th>
      <% end %>
    </tr>
  </thead>

  <tbody>
  <% events.each do |event| %>
    <tr>
      <td><%= link_to event.short_title, event %></td>
      <% if user_signed_in? %>
        <td><%= current_user.distance_to(event.venue) %> mi</td>
      <% end %>
      <td><%= l event.start_time.to_time, format: :short_time %> - <%= l event.end_time.to_time, format: :short_time %><br/><span class="muted" data-livestamp="<%= event.start_time %>"></span></td>
      <td><%= event.start_time.to_date.strftime("%A %B #{event.start_time.day.ordinalize}") %></td>
      <td></td>
      <td><%= render :partial => 'events/attends_meter', :locals => { :event => event } %></td>
      <td><%= link_to event.venue.name, event.venue %></td>
      <td><%= event_price(event) %></td>
      <td><%= link_to event.host.name, event.host %><br/><span class="muted"><%= pluralize(event.host.hostings.count, 'activity') %> - <%= event.host.rating_as_host %></span></td>
      <% if user_signed_in? %>
        <td><%= render :partial => 'events/status_wrt_current_user', :locals => {:event => event} %></td>
      <% end %>
    </tr>
  <% end %>
  </tbody>
</table>
