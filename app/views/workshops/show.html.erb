<%
  next_rerun = @workshop.ongoing_or_next_rerun
%>

<div class="row">
  <div class="span2">
    <p class="hidden-phone">
      <%= iconic_link_to 'back to search listing', root_path, :icon => 'chevron-left' %>
      <%= image_tag(@workshop.img_src(:large), :class => "img-rounded large_page_thumb") %>
      <% if @workshop.external? and not @workshop.external_url.blank? %>
        <%= external_domain(@workshop) %>
      <% end %>      
    </p>
    <p class="hidden-tablet hidden-desktop pull-right" style="margin: 0 0 10px 10px;">
      <%= image_tag(@workshop.img_src(:medium), :class => "img-rounded large_page_thumb") %><br/>
    </p>
  </div>
  <div class="span5">
    <h1><%= @workshop.title %></h1>
    <div class="row">
      <%= render 'reruns/when_where_price', :rerun => next_rerun, :show_time => true %>
    </div>
    <p class="event_description clearfix">
      <%= BlueCloth.new(@workshop.description, :filter_html).to_html.html_safe %>
    </p>
  </div>
  <div class="span3">
    <div class="row">    
      <div class="span2">
        <p><%= render 'events/smart_attend_btn', :event => next_rerun, :no_check => true, :cta => 'RSVP', :btn_classes => 'btn-block' %> </p>         
      </div>
      <div class="span1">
        <button class="disabled btn btn-default btn-mini btn-block">Remind me</button>
        <button class="disabled btn btn-default btn-mini btn-block">Share</button>
        <button class="disabled btn btn-default btn-mini btn-block">Message</button>
      </div>
    </div>
    <div class="row">
      <div class="span3">
        <%= render 'reruns/attendees_pseudo_feed', :rerun => next_rerun %>
      </div>
    </div>
  </div>
  <div class="span2">
    <h4 class="muted margin0">hosted by:</h4>
    <%= render 'users/mini_profile', :user => @workshop.host %>
  </div>
</div>
<br/>
<div class="row">
  <div class="span7">
    <ul class="nav nav-tabs margin0">
      <li class="active"><a href="#future" data-toggle="tab">Coming Up (<%= @future_reruns.count %>)</a></li>
      <li><a href="#past" data-toggle="tab">Past (<%= @past_reruns.count %>)</a></li>
    </ul>

    <div id="myTabContent" class="tab-content">
      <div class="tab-pane active" id="future">
        <% if @future_reruns.count == 0 %>
          No future workshops.
        <% else %>
          <%= render 'reruns/index', :reruns => @future_reruns, :click_to_show => false, :hide_flags => true %>
        <% end %>
      </div>
      <div class="tab-pane fade" id="past">
        <% if @past_reruns.count == 0 %>
          No past workshops.
        <% else %>
          <%= render 'reruns/index', :reruns => @past_reruns, :click_to_show => false, :hide_flags => true %>
        <% end %>
      </div>
    </div>
  </div>
</div>