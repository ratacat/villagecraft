<%
  next_rerun = @workshop.ongoing_or_next_rerun
%>
<h1><%= @workshop.title %></h1>
<div class="row">
  <div class="span2">
    <p class="hidden-phone">
      <%= image_tag(@workshop.img_src(:large), :class => "img-rounded large_page_thumb") %>
      <%= render 'events/smart_attend_btn', :event => next_rerun, :no_check => true, :cta => 'Sign me up', :btn_classes => 'btn-large btn-block' %>
    </p>
    <p class="hidden-tablet hidden-desktop pull-right" style="margin: 0 0 10px 10px;">
      <%= image_tag(@workshop.img_src(:medium), :class => "img-rounded large_page_thumb") %><br/>
      <%= render 'events/smart_attend_btn', :event => next_rerun, :no_check => true, :cta => 'Sign me up', :btn_classes => '' %>
    </p>
  </div>
  <div class="span6">
    <div class="row">
      <%= render 'reruns/when_where_price', :rerun => next_rerun %>
    </div>
    <p class="event_description clearfix">
      <%= BlueCloth.new(@workshop.description, :filter_html).to_html.html_safe %>
    </p>
  </div>
  <div class="span3">
    <h4 class="muted margin0">Host</h4>
    <%= render 'users/mini_profile', :user => @workshop.host %>
    <% if next_rerun %>
      <h4 class="muted">Attendees (<%= next_rerun.attendees.count %>)</h4>
      <%= next_rerun.attendees.map(&:first_name_plus_last_initial).join(', ') %>
    <% end %>
  </div>
</div>
<br/>
<div class="row">
  <div class="span9">
    <ul class="nav nav-tabs margin0">
      <li class="active"><a href="#future" data-toggle="tab">Coming Up (<%= @future_reruns.count %>)</a></li>
      <li><a href="#past" data-toggle="tab">Past (<%= @past_reruns.count %>)</a></li>
    </ul>

    <div id="myTabContent" class="tab-content">
      <div class="tab-pane active" id="future">
        <% if @future_reruns.count == 0 %>
          No future workshops.
        <% else %>
          <%= render 'reruns/index', :reruns => @future_reruns, :click_to_show => false %>
        <% end %>
      </div>
      <div class="tab-pane fade" id="past">
        <% if @past_reruns.count == 0 %>
          No past workshops.
        <% else %>
          <%= render 'reruns/index', :reruns => @past_reruns, :click_to_show => false %>
        <% end %>
      </div>
    </div>
  </div>
</div>